/* --- STYLES (Keep the previous CSS styles as they were) --- */
:root {
--primary-color: #2c3e50;
--secondary-color: #3498db;
--rgb-secondary-color: 52, 152, 219; /* Added for box-shadow transparency */
--accent-color: #e74c3c;
--light-color: #ecf0f1;
--dark-color: #2c3e50; /* This might be overridden by dark mode, or used as a base for dark elements in light mode */
--text-color: #333;
--text-light: #7f8c8d;
--background-light: #f9f9f9;
--white: #ffffff;
--shadow-light: rgba(0, 0, 0, 0.05);
--shadow-medium: rgba(0, 0, 0, 0.08);
--shadow-dark: rgba(0, 0, 0, 0.15);
font-size: 16px;
--border-radius: 8px; /* Moved from UI improvements for consistency */

/* Dark Mode Variables */
--dm-primary-color: #0d1117;
--dm-secondary-color: #1f6feb;
--dm-rgb-secondary-color: 31, 111, 235; /* RGB for dm-secondary-color */
--dm-text-color: #c9d1d9;
--dm-text-light: #8b949e;
--dm-background-light: #161b22; /* Slightly lighter dark background for some elements */
--dm-card-bg: #161b22; /* Specific for cards or similar elements */
--dm-border-color: #30363d;
--dm-input-bg: #0d1117;
--dm-white: #010409; /* Effectively dark if white is used as a background */
--dm-shadow-light: rgba(200, 200, 200, 0.05);
--dm-shadow-medium: rgba(200, 200, 200, 0.08);
--dm-shadow-dark: rgba(200, 200, 200, 0.15);
}

html.dark-mode {
    --primary-color: var(--dm-primary-color);
    --secondary-color: var(--dm-secondary-color);
    --rgb-secondary-color: var(--dm-rgb-secondary-color);
    --text-color: var(--dm-text-color);
    --text-light: var(--dm-text-light);
    --background-light: var(--dm-background-light); /* General light backgrounds become darker */
    --white: var(--dm-white); /* Elements using 'var(--white)' for background become dark */
    --shadow-light: var(--dm-shadow-light);
    --shadow-medium: var(--dm-shadow-medium);
    --shadow-dark: var(--dm-shadow-dark);
    --dark-color: var(--dm-text-color); /* Adjust if --dark-color was used for text */
    /* --accent-color could also be mapped if a dark mode version is desired */
}

* { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Poppins', sans-serif; }
html { scroll-behavior: smooth; }
body { line-height: 1.6; color: var(--text-color); background-color: var(--background-light); overflow-x: hidden; }
.container { max-width: 1200px; margin: 0 auto; padding: 0 1rem; }
img { max-width: 100%; height: auto; display: block; }
.sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0, 0, 0, 0); white-space: nowrap; border: 0; }

/* Improved Focus States */
:focus-visible { outline: 3px solid var(--secondary-color); outline-offset: 2px; border-radius: 4px; box-shadow: 0 0 0 3px rgba(var(--rgb-secondary-color), 0.3); }
:focus:not(:focus-visible) { outline: none; }
a:focus-visible, button:focus-visible, input:focus-visible, textarea:focus-visible { outline: 3px solid var(--secondary-color); outline-offset: 2px; border-radius: 4px; box-shadow: 0 0 0 3px rgba(var(--rgb-secondary-color), 0.3); }
a:focus:not(:focus-visible), button:focus:not(:focus-visible), input:focus:not(:focus-visible), textarea:focus:not(:focus-visible) { outline: none; }
.form-group input:focus, .form-group textarea:focus { border-color: var(--secondary-color); box-shadow: 0 0 0 3px rgba(var(--rgb-secondary-color), 0.3); outline: none; }
html.dark-mode .form-group input:focus, html.dark-mode .form-group textarea:focus {
    border-color: var(--secondary-color); /* Uses dm-secondary-color */
    box-shadow: 0 0 0 3px rgba(var(--rgb-secondary-color), 0.3); /* Uses dm-rgb-secondary-color */
}

/* General Dark Mode Body */
html.dark-mode body {
    background-color: var(--primary-color); /* Uses dm-primary-color */
    color: var(--text-color); /* Uses dm-text-color */
}

/* Header */
header { background-color: var(--white); box-shadow: 0 1px 4px var(--shadow-medium); position: fixed; width: 100%; top: 0; left: 0; z-index: 1000; transition: box-shadow 0.3s ease, background-color 0.4s ease; }
html.dark-mode header {
    background-color: rgba(13, 17, 23, 0.85); /* Darker, slightly transparent */
    backdrop-filter: blur(5px);
    -webkit-backdrop-filter: blur(5px);
    box-shadow: 0 1px 4px var(--shadow-medium); /* Uses dm-shadow-medium */
}
/* Scrolled header - already has backdrop filter logic from previous subtask, ensure dark mode compatibility */
header.scrolled {
    background-color: rgba(255, 255, 255, 0.95); /* Slightly transparent white */
    backdrop-filter: blur(5px);
    -webkit-backdrop-filter: blur(5px);
    box-shadow: 0 2px 10px var(--shadow-medium);
}
html.dark-mode header.scrolled {
     background-color: rgba(22, 27, 34, 0.85);
     box-shadow: 0 2px 10px var(--shadow-dark); /* Uses dm-shadow-dark */
 }

.navbar { display: flex; justify-content: space-between; align-items: center; padding: 1rem 0; transition: padding 0.3s ease; }
.logo { font-size: 1.5rem; font-weight: 700; color: var(--primary-color); text-decoration: none; }
html.dark-mode .logo { color: var(--text-color); } /* Uses dm-text-color */
.logo span { color: var(--secondary-color); }
/* html.dark-mode .logo span already covered by html.dark-mode rule for --secondary-color */

.nav-links { display: flex; list-style: none; align-items: center; }
.nav-links li { margin-left: 1.875rem; }
.nav-links a { text-decoration: none; color: var(--text-color); font-weight: 500; transition: color 0.3s ease; padding: 0.5rem 0; position: relative; }
html.dark-mode .nav-links a { color: var(--text-color); } /* Uses dm-text-color */
.nav-links a::after { content: ''; position: absolute; width: 0; height: 2px; bottom: 0; left: 0; background-color: var(--secondary-color); transition: width 0.3s ease; }
.nav-links a:hover::after, .nav-links a:focus::after { width: 100%; }
.nav-links a:hover, .nav-links a:focus { color: var(--secondary-color); }
/* html.dark-mode .nav-links a:hover, html.dark-mode .nav-links a:focus are covered by html.dark-mode rule for --secondary-color */

/* Language Switcher */
.language-switcher { margin-left: 1.25rem; display: flex; align-items: center; gap: 0.3rem; border: 1px solid var(--light-color); padding: 0.2rem 0.5rem; border-radius: 15px; }
html.dark-mode .language-switcher { border-color: var(--dm-border-color); }
.language-switcher button { color: var(--text-light); background: none; border: none; text-decoration: none; font-size: 0.875rem; cursor: pointer; padding: 0.2rem 0.4rem; border-radius: 10px; transition: color 0.3s ease, background-color 0.3s ease; font-family: 'Poppins', sans-serif; }
html.dark-mode .language-switcher button { color: var(--text-light); } /* Uses dm-text-light */
.language-switcher button:hover, .language-switcher button:focus { color: var(--secondary-color); }
/* html.dark-mode .language-switcher button:hover covered by general secondary color change */
.language-switcher button.active { color: #FFFFFF; background-color: var(--secondary-color); font-weight: 600; cursor: default; }
html.dark-mode .language-switcher button.active { color: #FFFFFF; background-color: var(--secondary-color); } /* Uses dm-secondary-color for bg */
.language-separator { color: var(--text-light); font-size: 0.875rem; line-height: 1; }
html.dark-mode .language-separator { color: var(--text-light); } /* Uses dm-text-light */

/* Dark Mode Toggle Button Style */
#dark-mode-toggle {
    background: none;
    border: none;
    cursor: pointer;
    font-size: 1.2rem; /* Consider adjusting if it doesn't fit well with other nav items */
    color: var(--text-color);
    padding: 0.5rem; /* Adjust padding to align with other nav items if necessary */
    margin-left: 0.5rem; /* Add some margin if it's too close to the language switcher */
}
html.dark-mode #dark-mode-toggle {
    color: var(--text-color); /* Will use dm-text-color */
}

/* Mobile Menu */
.menu-toggle { display: none; background: none; border: none; font-size: 1.5rem; color: var(--primary-color); cursor: pointer; padding: 0.5rem; z-index: 1002; }
html.dark-mode .menu-toggle { color: var(--text-color); } /* Uses dm-text-color */
html.dark-mode .nav-links { background-color: var(--dm-card-bg); box-shadow: -5px 0 15px var(--dm-shadow-light); } /* Darker mobile nav */
html.dark-mode .nav-links a { border-bottom-color: var(--dm-border-color); }

/* Hero Section */
.hero { padding: 10rem 0 6.25rem; background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%); display: flex; align-items: center; min-height: calc(100vh - 50px); }
html.dark-mode .hero {
    background: linear-gradient(135deg, var(--dm-primary-color) 0%, var(--dm-background-light) 100%);
}
.hero-content { display: flex; align-items: center; justify-content: space-between; gap: 3rem; }
.hero-text { flex: 1; animation: fadeInSlideUp 0.8s ease-out forwards; }
.hero-text h1 { font-size: clamp(2.5rem, 5vw, 3.2rem); margin-bottom: 1.25rem; color: var(--primary-color); line-height: 1.2; }
.hero-text h1 span { color: var(--secondary-color); }
.hero-text p { font-size: 1.125rem; color: var(--text-light); margin-bottom: 1.875rem; max-width: 600px; }
.hero-buttons { display: flex; gap: 1rem; flex-wrap: wrap; }
.hero-image { flex: 1; text-align: center; max-width: 380px; margin: 0 auto; animation: fadeInScale 0.8s ease-out 0.2s forwards; opacity: 0; }
.hero-image img { border-radius: 50%; box-shadow: 0 10px 35px var(--shadow-medium); width: 100%; aspect-ratio: 1 / 1; object-fit: cover; border: 5px solid var(--white); }
html.dark-mode .hero-image img {
    border-color: var(--dm-card-bg); /* Border that matches card background in dark mode */
    box-shadow: 0 10px 35px var(--dm-shadow-dark);
}

/* Animations */
@keyframes fadeInSlideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
@keyframes fadeInScale { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }

/* Buttons */
.btn { display: inline-block; padding: 0.8rem 1.9rem; background-color: var(--secondary-color); color: var(--white); border-radius: var(--border-radius); text-decoration: none; font-weight: 500; transition: all 0.3s ease; border: 2px solid transparent; cursor: pointer; text-align: center; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
html.dark-mode .btn { color: #FFFFFF; /* Ensure text on primary buttons is light */ }
/* .btn:hover, .btn:focus is handled by UI improvement section later */
html.dark-mode .btn:hover, html.dark-mode .btn:focus {
    background-color: #2474a6; /* Slightly adjusted hover for dm-secondary */
    /* box-shadow is handled by UI improvement section */
}
.btn-outline { background-color: transparent; border: 2px solid var(--secondary-color); color: var(--secondary-color); box-shadow: none; }
html.dark-mode .btn-outline {
    color: var(--secondary-color); /* Will use dm-secondary-color */
    border-color: var(--secondary-color); /* Will use dm-secondary-color */
}

/* Sections */
/* section padding is handled by UI improvement section later */
section:nth-of-type(even) { background-color: var(--white); }
html.dark-mode section:nth-of-type(even) { background-color: var(--primary-color); } /* Even sections get primary dark bg */
html.dark-mode section:nth-of-type(odd) { background-color: var(--dm-background-light); } /* Odd sections get slightly lighter dark bg */
/* html.dark-mode .hero specific background is already handled */

.section-title { text-align: center; margin-bottom: 3.75rem; }
.section-title h2 { font-size: clamp(1.8rem, 4vw, 2.25rem); color: var(--primary-color); position: relative; display: inline-block; padding-bottom: 1rem; margin-bottom: 0; }
html.dark-mode .section-title h2 { color: var(--text-color); } /* Uses dm-text-color */
.section-title h2::after { content: ''; position: absolute; bottom: 0; left: 50%; transform: translateX(-50%); width: 80px; height: 4px; background-color: var(--secondary-color); border-radius: 2px; }
/* html.dark-mode .section-title h2::after will correctly use dm-secondary-color */

/* About */
.about-content { display: flex; align-items: center; gap: 3rem; }
.about-image { flex: 1; max-width: 450px; }
.about-image img { border-radius: 10px; box-shadow: 0 10px 30px var(--shadow-medium); }
html.dark-mode .about-image img { box-shadow: 0 10px 30px var(--dm-shadow-medium); }
.about-text { flex: 1; }
.about-text h3 { font-size: 1.75rem; margin-bottom: 1.25rem; color: var(--primary-color); }
.about-text p { margin-bottom: 1rem; color: var(--text-light); }
.about-text p:last-of-type { margin-bottom: 1.5rem; }

/* Experience */
.timeline { position: relative; max-width: 800px; margin: 0 auto; padding: 2rem 0; }
.timeline::after { content: ''; position: absolute; width: 3px; background-color: var(--secondary-color); top: 0; bottom: 0; left: 50%; transform: translateX(-50%); border-radius: 2px; }
.timeline-item { padding: 0.625rem 2.5rem; position: relative; width: 50%; margin-bottom: 1.5rem; /* Added margin bottom */ }
.timeline-item::after { content: ''; position: absolute; width: 22px; height: 22px; background-color: var(--white); border: 4px solid var(--secondary-color); border-radius: 50%; top: 1.25rem; z-index: 1; transition: transform 0.3s ease; }
.timeline-item:hover::after { transform: scale(1.2); }
.timeline-item.left { left: 0; padding-right: 1.5rem; text-align: right; }
.timeline-item.right { left: 50%; padding-left: 1.5rem; text-align: left; }
.timeline-item.left::after { right: -11px; }
.timeline-item.right::after { left: -11px; }
.timeline-content { padding: 1.25rem; background-color: var(--white); border-radius: var(--border-radius); box-shadow: 0 5px 15px var(--shadow-light); position: relative; transition: box-shadow 0.3s ease, transform 0.3s ease; border: 1px solid var(--light-color); }
/* .timeline-item:hover .timeline-content is handled by UI improvement section */
.timeline-content h3 { font-size: 1.25rem; margin-bottom: 0.625rem; color: var(--primary-color); }
.timeline-content p { color: var(--text-light); margin-bottom: 0.3125rem; font-size: 0.9rem; }
.timeline-date { font-weight: 600; color: var(--secondary-color); font-size: 0.9rem; margin-bottom: 0.5rem; }

/* Skills */
.skills-container { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1.875rem; } /* Use auto-fit */
.skill-card { background-color: var(--white); padding: 1.875rem; border-radius: var(--border-radius); box-shadow: 0 5px 15px var(--shadow-light); transition: transform 0.3s ease, box-shadow 0.3s ease; text-align: center; border: 1px solid var(--light-color); display: flex; flex-direction: column; } /* Added flex */
/* .skill-card:hover is handled by UI improvement section */
.skill-card i { font-size: 2.8rem; color: var(--secondary-color); margin-bottom: 1.25rem; display: inline-block; transition: transform 0.3s ease; }
.skill-card:hover i { transform: scale(1.1); }
.skill-card h3 { font-size: 1.25rem; margin-bottom: 1rem; color: var(--primary-color); }
.skill-card p { color: var(--text-light); font-size: 0.9rem; flex-grow: 1; } /* Added flex-grow */

/* Publications */
.publications-container { display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 1.875rem; }
.publication-card { background-color: var(--white); border-radius: var(--border-radius); overflow: hidden; box-shadow: 0 5px 15px var(--shadow-medium); display: flex; flex-direction: column; transition: transform 0.3s ease, box-shadow 0.3s ease; border: 1px solid var(--light-color); }
/* .publication-card:hover is handled by UI improvement section */
.publication-image { height: 220px; overflow: hidden; position: relative; background-color: #eee; }
html.dark-mode .publication-image { background-color: var(--dm-border-color); } /* Darker placeholder for image bg */
.publication-image img { width: 100%; height: 100%; object-fit: cover; transition: transform 0.5s ease; }
.publication-card:hover .publication-image img { transform: scale(1.05); }
.publication-info { padding: 1.5rem; flex-grow: 1; display: flex; flex-direction: column; }
.publication-info h3 { font-size: 1.2rem; margin-bottom: 0.75rem; color: var(--primary-color); }
.publication-info .meta { display: flex; justify-content: space-between; color: var(--text-light); font-size: 0.875rem; margin-bottom: 1rem; flex-wrap: wrap; gap: 0.5rem; } /* Added wrap and gap */
.publication-info .meta span { display: flex; align-items: center; gap: 0.4rem; }
.publication-info .meta i { color: var(--secondary-color); }
.publication-info p { color: var(--text-light); margin-bottom: 1.2rem; flex-grow: 1; font-size: 0.9rem; }
.publication-info a { color: var(--secondary-color); text-decoration: none; font-weight: 600; transition: color 0.3s ease; align-self: flex-start; margin-top: auto; } /* Added margin-top auto */
.publication-info a:hover, .publication-info a:focus { color: #2980b9; }

/* Contact */
.contact-container { display: flex; gap: 3rem; flex-wrap: wrap; }
.contact-info { flex: 1; min-width: 300px; }
.contact-info h3 { font-size: 1.5rem; margin-bottom: 1.25rem; color: var(--primary-color); }
.contact-info p { margin-bottom: 1.875rem; color: var(--text-light); }
.contact-details { margin-bottom: 1.875rem; }
.contact-item { display: flex; align-items: center; margin-bottom: 1.2rem; gap: 1rem; }
.contact-item i { width: 45px; height: 45px; background-color: var(--light-color); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: var(--secondary-color); flex-shrink: 0; font-size: 1.1rem; transition: background-color 0.3s ease, color 0.3s ease; }
.contact-item:hover i { background-color: var(--secondary-color); color: var(--white); }
.contact-item div h4 { font-size: 1rem; margin-bottom: 0.25rem; color: var(--primary-color); }
.contact-item div p, .contact-item div a { margin-bottom: 0; color: var(--text-light); font-size: 0.9rem; text-decoration: none; transition: color 0.3s ease; word-break: break-all; }
.contact-item div a:hover, .contact-item div a:focus { color: var(--secondary-color); }
.social-links { display: flex; gap: 1rem; flex-wrap: wrap; }
.social-links a { width: 45px; height: 45px; background-color: var(--light-color); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: var(--primary-color); transition: all 0.3s ease; font-size: 1.2rem; }
.social-links a:hover, .social-links a:focus { background-color: var(--secondary-color); color: var(--white); transform: translateY(-3px) scale(1.05); box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
.contact-form { flex: 1.2; min-width: 300px; background-color: var(--white); padding: 2rem; border-radius: var(--border-radius); box-shadow: 0 5px 20px var(--shadow-light); border: 1px solid var(--light-color); }
.form-group { margin-bottom: 1.25rem; }
.form-group label { display: block; margin-bottom: 0.6rem; color: var(--primary-color); font-weight: 500; font-size: 0.9rem; }
.form-group input, .form-group textarea { width: 100%; padding: 0.8rem; border: 1px solid #ddd; border-radius: var(--border-radius); font-family: 'Poppins', sans-serif; font-size: 1rem; transition: border-color 0.3s ease, box-shadow 0.3s ease; }
html.dark-mode .form-group input, html.dark-mode .form-group textarea {
    background-color: var(--dm-input-bg);
    border-color: var(--dm-border-color);
    color: var(--dm-text-color);
}
.form-group textarea { min-height: 150px; resize: vertical; }
#form-status { margin-top: 1rem; font-weight: 500; min-height: 1.2em; }
#form-status.success { color: green; }
#form-status.error { color: var(--accent-color); }

/* Map Section */
.map-section { padding: 4rem 0; background-color: var(--background-light); }
.map-container { max-width: 1100px; margin: 0 auto; padding: 1rem; background-color: var(--white); border-radius: var(--border-radius); box-shadow: 0 8px 25px rgba(0, 0, 0, 0.09); border: 1px solid #e0e0e0; }
html.dark-mode .skill-card,
html.dark-mode .publication-card,
html.dark-mode .timeline-content,
html.dark-mode .contact-form,
html.dark-mode .map-container { /* General card styling for dark mode */
    background-color: var(--dm-card-bg);
    border: 1px solid var(--dm-border-color);
    box-shadow: 0 5px 15px var(--dm-shadow-light); /* Softer shadow for dark cards */
}
.map-container iframe { display: block; width: 100%; height: 450px; border: 0; border-radius: 5px; }
.map-title { text-align: center; font-size: 1.6rem; color: var(--primary-color); margin-bottom: 1.5rem; }

/* Footer */
footer { background-color: var(--primary-color); color: rgba(255, 255, 255, 0.8); padding: 3.5rem 0 1.5rem; text-align: center; }
html.dark-mode footer {
    background-color: var(--dm-primary-color);
    color: rgba(201, 209, 217, 0.8);
}
.footer-content { margin-bottom: 1.5rem; }
.footer-content .logo { color: var(--white); margin-bottom: 0.7rem; font-size: 1.6rem; }
html.dark-mode .footer-content .logo { color: #FFFFFF; }
.footer-content p { font-size: 0.95rem; margin-bottom: 1.8rem; }
.footer-links { display: flex; justify-content: center; list-style: none; margin-bottom: 1.8rem; flex-wrap: wrap; gap: 1.2rem; }
.footer-links a { color: rgba(255, 255, 255, 0.8); text-decoration: none; transition: color 0.3s ease; font-weight: 500; }
html.dark-mode .footer-links a { color: rgba(201, 209, 217, 0.8); }
.footer-links a:hover, .footer-links a:focus { color: var(--secondary-color); }
html.dark-mode .footer-links a:hover, html.dark-mode .footer-links a:focus { color: var(--secondary-color); } /* Uses dm-secondary-color */
.copyright { color: rgba(255, 255, 255, 0.6); font-size: 0.875rem; }
html.dark-mode .copyright { color: rgba(201, 209, 217, 0.6); }

/* Responsive Styles */
@media (max-width: 991.98px) {
:root { font-size: 15px; }
.hero-content, .about-content { flex-direction: column; text-align: center; }
.hero-text { margin-bottom: 3rem; animation: none; }
.hero-image { animation: none; opacity: 1; }
.hero-text p, .about-text p { margin-left: auto; margin-right: auto; max-width: 550px; }
.hero-buttons { justify-content: center; }
.about-image { margin: 0 auto 2rem auto; }
.timeline-item.left { text-align: left; }
}

@media (max-width: 767.98px) {
:root { font-size: 14px; }
.menu-toggle { display: block; }
.navbar { padding: 0.8rem 0; }
.nav-links { position: fixed; top: 0; right: -100%; width: min(75%, 320px); height: 100vh; background-color: var(--white); box-shadow: -5px 0 15px rgba(0, 0, 0, 0.1); flex-direction: column; justify-content: flex-start; align-items: stretch; padding: 6rem 1.5rem 2rem; transition: right 0.4s cubic-bezier(0.23, 1, 0.32, 1); z-index: 1001; }
html.dark-mode .nav-links { background-color: var(--dm-card-bg); box-shadow: -5px 0 15px var(--dm-shadow-light); }
.nav-links.active { right: 0; }
.nav-links li { margin-left: 0; width: 100%; margin-bottom: 0.5rem; }
.nav-links a { display: block; padding: 0.9rem 0.5rem; font-size: 1.1rem; border-bottom: 1px solid var(--light-color); }
html.dark-mode .nav-links a { border-bottom-color: var(--dm-border-color); }
.nav-links a::after { display: none; }
body.nav-open::before { content: ''; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.5); z-index: 1000; backdrop-filter: blur(2px); }
html.dark-mode body.nav-open::before { background-color: rgba(0,0,0,0.7); }
.language-switcher-container { order: 10; margin-top: auto; padding-top: 1rem; border-top: 1px solid var(--light-color); }
html.dark-mode .language-switcher-container { border-top-color: var(--dm-border-color); }
.language-switcher { margin-left: 0; border: none; padding: 0.5rem 0; justify-content: center; }

section { padding: 4rem 0; }
.hero { padding-top: 7rem; padding-bottom: 4rem; min-height: auto; }
.timeline::after { left: 20px; transform: none; }
.timeline-item { width: 100%; padding-left: 55px; padding-right: 1rem; text-align: left; }
.timeline-item.left, .timeline-item.right { left: 0; }
.timeline-item::after, .timeline-item.left::after, .timeline-item.right::after { left: 9px; top: 1.5rem; }
html.dark-mode .timeline-item::after { background-color: var(--dm-card-bg); border-color: var(--secondary-color); }
.skills-container { grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); } /* Adjust minmax for smaller screens */
.map-section { padding: 3rem 0; }
.map-container { padding: 0.5rem; }
.map-container iframe { height: 350px; }
html.dark-mode .map-container iframe { filter: invert(90%) hue-rotate(180deg); }
}

@media (max-width: 575.98px) {
.hero-text h1 { font-size: 1.9rem; }
.section-title h2 { font-size: 1.7rem; }
.contact-info, .contact-form { min-width: unset; flex-basis: 100%; }
.contact-form { padding: 1.5rem; }
.footer-links { gap: 0.8rem 1.5rem; }
.timeline-item { padding-left: 45px; } /* Adjust padding for smaller dot space */
.timeline-item::after, .timeline-item.left::after, .timeline-item.right::after { left: 5px; width:18px; height: 18px; border-width: 3px;} /* Adjust dot size */
}
    /* --- Additions/Modifications for UI Improvements & Animations --- */

    :root {
        /* Standard border-radius */
        --border-radius: 8px;
    }

    /* Apply base border-radius */
    .btn, .skill-card, .publication-card, .contact-form, .timeline-content, .map-container, .form-group input, .form-group textarea, .language-switcher {
        border-radius: var(--border-radius);
    }
     /* Override for specific round elements */
    .hero-image img, .contact-item i, .social-links a, #dark-mode-toggle, .timeline-item::after {
        border-radius: 50%;
    }
     .language-switcher button {
         border-radius: 10px; /* Keep smaller radius */
     }

    /* Smoother transitions on more elements */
    body, header, section, .skill-card, .publication-card, .contact-form, .contact-item i, .social-links a, footer, .timeline-content, .map-container, .about-image img, .hero-image img, .section-title h2, .about-text, .hero-text, .timeline-item {
        transition: background-color 0.4s ease, color 0.4s ease, border-color 0.4s ease, box-shadow 0.4s ease, opacity 0.6s ease-out, transform 0.6s ease-out;
    }


    /* Header shadow on scroll */
    header.scrolled {
        box-shadow: 0 2px 10px var(--shadow-medium);
        background-color: rgba(255, 255, 255, 0.95); /* Slightly transparent */
        backdrop-filter: blur(5px);
        -webkit-backdrop-filter: blur(5px);
    }
    body.dark-mode header.scrolled {
         background-color: rgba(27, 38, 59, 0.95); /* Dark transparent */
         box-shadow: 0 2px 10px var(--shadow-dark);
     }

    /* Button hover refinement */
    .btn:hover, .btn:focus {
        transform: translateY(-4px) scale(1.02); /* Slightly more lift */
        box-shadow: 0 8px 15px var(--shadow-medium);
    }
    body.dark-mode .btn:hover, body.dark-mode .btn:focus {
        box-shadow: 0 8px 15px var(--shadow-dark);
    }


    /* Card hover refinement */
     .skill-card:hover, .publication-card:hover, .timeline-item:hover .timeline-content {
         transform: translateY(-10px); /* Consistent lift */
         box-shadow: 0 15px 30px var(--shadow-medium);
     }
      body.dark-mode .skill-card:hover, body.dark-mode .publication-card:hover, body.dark-mode .timeline-item:hover .timeline-content {
          box-shadow: 0 15px 30px var(--shadow-dark);
      }


    /* General Section Padding */
    section {
        padding: 6.5rem 0; /* Slightly more vertical space */
    }
     @media (max-width: 767.98px) {
        section {
             padding: 4.5rem 0;
         }
         .hero { padding-top: 8rem; padding-bottom: 4.5rem; }
     }


    /* --- Scroll Animation Classes --- */
    .fade-in-element {
        opacity: 0;
        transform: translateY(30px); /* Start slightly lower */
        transition: opacity 0.6s ease-out, transform 0.6s ease-out;
    }

    .fade-in-element.is-visible {
        opacity: 1;
        transform: translateY(0);
    }

     /* Add staggered delay for card elements */
    .skills-container .skill-card,
    .publications-container .publication-card,
    .timeline .timeline-item {
        /* Default state for observer */
        opacity: 0;
        transform: translateY(30px);
        transition: opacity 0.6s ease-out 0.2s, transform 0.6s ease-out 0.2s; /* Add base delay */
    }

     .skills-container.is-visible .skill-card,
     .publications-container.is-visible .publication-card,
     .timeline.is-visible .timeline-item {
        opacity: 1;
        transform: translateY(0);
     }

    /* Add specific delays for staggering within containers */
    .skills-container.is-visible .skill-card:nth-child(2) { transition-delay: 0.3s; }
    .skills-container.is-visible .skill-card:nth-child(3) { transition-delay: 0.4s; }
    .skills-container.is-visible .skill-card:nth-child(4) { transition-delay: 0.2s; } /* Reset for next row */
    .skills-container.is-visible .skill-card:nth-child(5) { transition-delay: 0.3s; }
    .skills-container.is-visible .skill-card:nth-child(6) { transition-delay: 0.4s; }
    .skills-container.is-visible .skill-card:nth-child(7) { transition-delay: 0.5s; }


    .publications-container.is-visible .publication-card:nth-child(2) { transition-delay: 0.3s; }
    .publications-container.is-visible .publication-card:nth-child(3) { transition-delay: 0.4s; }

    .timeline.is-visible .timeline-item:nth-child(odd) { transition-delay: 0.2s; }
    .timeline.is-visible .timeline-item:nth-child(even) { transition-delay: 0.35s; }


    /* Apply initial fade-in state to elements we want to animate */
    /* We will target containers/sections primarily */
    #about .about-image, #about .about-text,
    #experience .timeline,
    #skills .skills-container,
    #publications .publications-container,
    #contact .contact-info, #contact .contact-form,
    .map-section .map-container {
        /* Start hidden - JS will remove this class or add .is-visible */
        /* Let JS handle adding .is-visible for more control */
    }

     .section-title { /* Animate section titles too */
         opacity: 0;
         transform: translateY(20px);
         transition: opacity 0.6s ease-out, transform 0.6s ease-out;
     }
      .section-title.is-visible {
          opacity: 1;
          transform: translateY(0);
      }

    /* --- End UI Improvements & Animations --- */